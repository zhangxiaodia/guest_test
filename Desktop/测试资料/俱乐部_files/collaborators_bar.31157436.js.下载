(window.webpackJsonplizard_service_mindmap=window.webpackJsonplizard_service_mindmap||[]).push([[0],{1281:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t},e.exports=t.default},1289:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t},e.exports=t.default},1290:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,r,a,o,i){var l=n+(-a*(t-r)+-o*n)*e,s=t+l*e;if(Math.abs(l)<i&&Math.abs(s-r)<i)return u[0]=r,u[1]=0,u;return u[0]=s,u[1]=l,u};var u=[0,0];e.exports=t.default},1291:function(a,e,t){(function(r){(function(){var e,t,n;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:n=null!=r&&r.hrtime?(a.exports=function(){return(e()-n)/1e6},t=r.hrtime,(e=function(){var e;return 1e9*(e=t())[0]+e[1]})()):Date.now?(a.exports=function(){return Date.now()-n},Date.now()):(a.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(this)}).call(this,t(94))},1292:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var a="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==a)return!1}return!0},e.exports=t.default},1304:function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},1335:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l,i=n(70),s=o(n(439)),u=o(n(1336)),c=(l=i.EventEmitter,a(p,l),p.prototype.userColor=function(e){return this._colorPalette.userColor(e)},p.prototype.setColorPalette=function(e){this._colorPalette.setColorPalette(e)},p.prototype.quit=function(){this._socket.off("message",this._onMessage),this._sendClientStatus("quit")},p.prototype.start=function(){this._socket.on("message",this._onMessage),this._sendClientStatus("enter")},p.prototype.sendUserSelectMessage=function(e){var t=function(t,n){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(n).forEach(function(e){r[e]=n[e]}),r}(e,{type:"SELECT"}),n={type:"COLLABROOM",padId:this._fileGuid,fileGuid:this._fileGuid,data:t};this._socket.emit("message",n)},p.prototype._addCollaborators=function(e){var n=this,r=[];e.forEach(function(t){t.id!==n._currentUserId&&-1===f(n._collaborators,function(e){return e.id===t.id})&&(t.color=n.userColor(t.id),n._collaborators.push(t),r.push(t))}),0<r.length&&this.emit(p.Events.UserEnter,{collaborators:this._collaborators,enterUsers:r})},p.prototype._removeCollaborators=function(e){var n=this,r=[];e.forEach(function(t){if(t.id!==n._currentUserId){var e=f(n._collaborators,function(e){return e.id===t.id});-1<e&&(r.push(t),n._collaborators.splice(e,1))}}),0<r.length&&this.emit(p.Events.UserLeave,{collaborators:this._collaborators,leaveUsers:r})},p.prototype._defaultSendClientStatus=function(e){var t={component:"pad",type:"enter"===e?"CLIENT_READY":"CLIENT_QUIT",padId:this._fileGuid,fileGuid:this._fileGuid,reconnect:!0,sessionID:s.default.get("sessionID"),token:s.default.get("token"),protocolVersion:2};this._socket.emit("message",t)},p.prototype._handleCollabRoomMessage=function(e){var t=function(e,t){return e&&e.data&&e.data.userInfo&&""+e.data.userInfo.id!=""+t?e.data:void 0}(e,""+this._currentUserId);null!=t&&"SELECT"===t.type?this.emit(p.Events.UserSelect,t):this.emit(p.Events.Message,e)},p.ColorPalette=u.default,p.Events={UserEnter:"UserEnter",UserLeave:"UserLeave",UserSelect:"UserSelect",Message:"Message"},p);function p(e){var t=e.ws,n=e.fileGuid,r=e.currentUserId,a=e.colorPalette,o=e.sendClientStatus,i=l.call(this)||this;return i._collaborators=[],i.getCollaborators=function(){return i._collaborators},i._onMessage=function(e){if(e)if("CONNECTED"===e.type)i._sendClientStatus("enter");else if("COLLABROOM"===e.type){var t=e.data;if(!function(e){return e&&"string"==typeof e.type}(t))return void i.emit(p.Events.Message,e);switch(t.type){case"RECONNECT_READY":i._collaborators.length=0,i._colorPalette.reset(),i._addCollaborators(t.clients);break;case"USER_ENTER":i._addCollaborators([t.userInfo]);break;case"USER_LEAVE":i._removeCollaborators([t.userInfo]);break;default:i._handleCollabRoomMessage(e)}}},i._socket=t,i._currentUserId=r,i._fileGuid=n,i._sendClientStatus=o||i._defaultSendClientStatus,i._colorPalette=new u.default(i._currentUserId,a),i}function f(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n]))return n}return-1}t.default=c},1336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=["#A69ACA","#EC6E79","#F39801","#00A496","#FFD900","#674599","#83D4E7","#AF7C4F","#B8D200","#9D5B8B","#F15B1C","#41464B","#CD9F00","#47885E","#D7003B","#436EC9","#F897C7","#9C4109","#6E7A56","#83D4E7","#83609C","#F8DCDB","#E7C39C","#87B151","#9E0038","#B09FC9","#7DCFC8","#BEE7F0","#CD9F00","#CBAAC2","#F5C5C9","#CD8C28","#1A5A52","#9EB4E1","#406619","#CAB738","#F6C751","#8D699D","#613A14","#189DEC"],r=(o.prototype.setColorPalette=function(e){this._colorPalette=e,this.reset()},o.prototype.userColor=function(e){if(this._isCurrentUser(e))return"#5292F7";var t=this._userColorMap[e];return null==t&&(t=this._getColor(),this._userColorMap[e]=t),t},o.prototype.reset=function(){this._userColorMap={}},o.prototype._isCurrentUser=function(e){return e+""==this._currentUserId+""},o);function o(e,t){var n,r=this;this._colorPalette=a,this._userColorMap={},this._currentUserId=e,t&&(this._colorPalette=t),this._getColor=(n=0,function(){var e=r._colorPalette,t=e[n];return(n+=1)>e.length&&(n=0),t})}t.default=r},1337:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var a=n(1338);t.Motion=r(a);var o=n(1339);t.StaggeredMotion=r(o);var i=n(1340);t.TransitionMotion=r(i);var l=n(1342);t.spring=r(l);var s=n(1304);t.presets=r(s);var u=n(1281);t.stripStyle=r(u);var c=n(1343);t.reorderKeys=r(c)},1338:function(e,t,n){"use strict";t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return e&&e.__esModule?e:{default:e}}var i,l=o(n(1289)),s=o(n(1281)),_=o(n(1290)),S=o(n(1291)),c=o(n(333)),w=o(n(1292)),p=o(n(0)),f=o(n(3)),x=1e3/60,d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,i=p.default.Component),r(y,null,[{key:"propTypes",value:{defaultStyle:f.default.objectOf(f.default.number),style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired,children:f.default.func.isRequired,onRest:f.default.func},enumerable:!0}]),y.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||s.default(n),a=l.default(r);return{currentStyle:r,currentVelocity:a,lastIdealStyle:r,lastIdealVelocity:a}},y.prototype.componentDidMount=function(){this.prevTime=S.default(),this.startAnimationIfNecessary()},y.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=S.default(),this.startAnimationIfNecessary())},y.prototype.componentWillUnmount=function(){null!=this.animationID&&(c.default.cancel(this.animationID),this.animationID=null)},y.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&p.default.Children.only(e)},y);function y(e){var g=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),i.call(this,e),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,n=g.state,r=n.currentStyle,a=n.currentVelocity,o=n.lastIdealStyle,i=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var s=e[l];"number"==typeof s&&(t||(t=!0,r=u({},r),a=u({},a),o=u({},o),i=u({},i)),r[l]=s,a[l]=0,o[l]=s,i[l]=0)}t&&g.setState({currentStyle:r,currentVelocity:a,lastIdealStyle:o,lastIdealVelocity:i})},this.startAnimationIfNecessary=function(){g.animationID=c.default(function(e){var t=g.props.style;if(w.default(g.state.currentStyle,t,g.state.currentVelocity))return g.wasAnimating&&g.props.onRest&&g.props.onRest(),g.animationID=null,g.wasAnimating=!1,void(g.accumulatedTime=0);g.wasAnimating=!0;var n=e||S.default(),r=n-g.prevTime;if(g.prevTime=n,g.accumulatedTime=g.accumulatedTime+r,g.accumulatedTime>10*x&&(g.accumulatedTime=0),0===g.accumulatedTime)return g.animationID=null,void g.startAnimationIfNecessary();var a=(g.accumulatedTime-Math.floor(g.accumulatedTime/x)*x)/x,o=Math.floor(g.accumulatedTime/x),i={},l={},s={},u={};for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var p=t[c];if("number"==typeof p)s[c]=p,u[c]=0,i[c]=p,l[c]=0;else{for(var f=g.state.lastIdealStyle[c],d=g.state.lastIdealVelocity[c],y=0;y<o;y++){var h=_.default(x/1e3,f,d,p.val,p.stiffness,p.damping,p.precision);f=h[0],d=h[1]}var m=_.default(x/1e3,f,d,p.val,p.stiffness,p.damping,p.precision),v=m[0],b=m[1];s[c]=f+(v-f)*a,u[c]=d+(b-d)*a,i[c]=f,l[c]=d}}g.animationID=null,g.accumulatedTime-=o*x,g.setState({currentStyle:s,currentVelocity:u,lastIdealStyle:i,lastIdealVelocity:l}),g.unreadPropStyle=null,g.startAnimationIfNecessary()})},this.state=this.defaultState()}t.default=d,e.exports=t.default},1339:function(e,t,n){"use strict";t.__esModule=!0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n(1289)),l=o(n(1281)),k=o(n(1290)),C=o(n(1291)),s=o(n(333)),T=o(n(1292)),u=o(n(0)),c=o(n(3)),E=1e3/60;var p,d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,p=u.default.Component),r(y,null,[{key:"propTypes",value:{defaultStyles:c.default.arrayOf(c.default.objectOf(c.default.number)),styles:c.default.func.isRequired,children:c.default.func.isRequired},enumerable:!0}]),y.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(l.default),a=r.map(function(e){return i.default(e)});return{currentStyles:r,currentVelocities:a,lastIdealStyles:r,lastIdealVelocities:a}},y.prototype.componentDidMount=function(){this.prevTime=C.default(),this.startAnimationIfNecessary()},y.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=C.default(),this.startAnimationIfNecessary())},y.prototype.componentWillUnmount=function(){null!=this.animationID&&(s.default.cancel(this.animationID),this.animationID=null)},y.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&u.default.Children.only(e)},y);function y(e){var I=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),p.call(this,e),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=I.state,n=t.currentStyles,r=t.currentVelocities,a=t.lastIdealStyles,o=t.lastIdealVelocities,i=!1,l=0;l<e.length;l++){var s=e[l],u=!1;for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var p=s[c];"number"==typeof p&&(u||(i=u=!0,n[l]=f({},n[l]),r[l]=f({},r[l]),a[l]=f({},a[l]),o[l]=f({},o[l])),n[l][c]=p,r[l][c]=0,a[l][c]=p,o[l][c]=0)}}i&&I.setState({currentStyles:n,currentVelocities:r,lastIdealStyles:a,lastIdealVelocities:o})},this.startAnimationIfNecessary=function(){I.animationID=s.default(function(e){var t=I.props.styles(I.state.lastIdealStyles);if(function(e,t,n){for(var r=0;r<e.length;r++)if(!T.default(e[r],t[r],n[r]))return!1;return!0}(I.state.currentStyles,t,I.state.currentVelocities))return I.animationID=null,void(I.accumulatedTime=0);var n=e||C.default(),r=n-I.prevTime;if(I.prevTime=n,I.accumulatedTime=I.accumulatedTime+r,I.accumulatedTime>10*E&&(I.accumulatedTime=0),0===I.accumulatedTime)return I.animationID=null,void I.startAnimationIfNecessary();for(var a=(I.accumulatedTime-Math.floor(I.accumulatedTime/E)*E)/E,o=Math.floor(I.accumulatedTime/E),i=[],l=[],s=[],u=[],c=0;c<t.length;c++){var p=t[c],f={},d={},y={},h={};for(var m in p)if(Object.prototype.hasOwnProperty.call(p,m)){var v=p[m];if("number"==typeof v)f[m]=v,d[m]=0,y[m]=v,h[m]=0;else{for(var b=I.state.lastIdealStyles[c][m],g=I.state.lastIdealVelocities[c][m],_=0;_<o;_++){var S=k.default(E/1e3,b,g,v.val,v.stiffness,v.damping,v.precision);b=S[0],g=S[1]}var w=k.default(E/1e3,b,g,v.val,v.stiffness,v.damping,v.precision),x=w[0],O=w[1];f[m]=b+(x-b)*a,d[m]=g+(O-g)*a,y[m]=b,h[m]=g}}s[c]=f,u[c]=d,i[c]=y,l[c]=h}I.animationID=null,I.accumulatedTime-=o*E,I.setState({currentStyles:s,currentVelocities:u,lastIdealStyles:i,lastIdealVelocities:l}),I.unreadPropStyles=null,I.startAnimationIfNecessary()})},this.state=this.defaultState()}t.default=d,e.exports=t.default},1340:function(e,t,n){"use strict";t.__esModule=!0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return e&&e.__esModule?e:{default:e}}var _=o(n(1289)),d=o(n(1281)),E=o(n(1290)),S=o(n(1341)),P=o(n(1291)),i=o(n(333)),j=o(n(1292)),l=o(n(0)),s=o(n(3)),M=1e3/60;function D(e,t,r){var a=t;return null==a?e.map(function(e,t){return{key:e.key,data:e.data,style:r[t]}}):e.map(function(e,t){for(var n=0;n<a.length;n++)if(a[n].key===e.key)return{key:a[n].key,data:a[n].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}})}function A(e,r,a,t,n,o,i,l,s){for(var u=S.default(t,n,function(e,t){var n=r(t);return null==n?(a({key:t.key,data:t.data}),null):j.default(o[e],n,i[e])?(a({key:t.key,data:t.data}),null):{key:t.key,data:t.data,style:n}}),c=[],p=[],f=[],d=[],y=0;y<u.length;y++){for(var h=u[y],m=null,v=0;v<t.length;v++)if(t[v].key===h.key){m=v;break}if(null==m){var b=e(h);c[y]=b,f[y]=b;var g=_.default(h.style);p[y]=g,d[y]=g}else c[y]=o[m],f[y]=l[m],p[y]=i[m],d[y]=s[m]}return[u,c,p,f,d]}var u,c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,u=l.default.Component),r(p,null,[{key:"propTypes",value:{defaultStyles:s.default.arrayOf(s.default.shape({key:s.default.string.isRequired,data:s.default.any,style:s.default.objectOf(s.default.number).isRequired})),styles:s.default.oneOfType([s.default.func,s.default.arrayOf(s.default.shape({key:s.default.string.isRequired,data:s.default.any,style:s.default.objectOf(s.default.oneOfType([s.default.number,s.default.object])).isRequired}))]).isRequired,children:s.default.func.isRequired,willEnter:s.default.func,willLeave:s.default.func,didLeave:s.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return d.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),p.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,a=e.willLeave,o=e.didLeave,i="function"==typeof n?n(t):n,l=void 0;l=null==t?i:t.map(function(e){for(var t=0;t<i.length;t++)if(i[t].key===e.key)return i[t];return e});var s=null==t?i.map(function(e){return d.default(e.style)}):t.map(function(e){return d.default(e.style)}),u=null==t?i.map(function(e){return _.default(e.style)}):t.map(function(e){return _.default(e.style)}),c=A(r,a,o,l,i,s,u,s,u),p=c[0];return{currentStyles:c[1],currentVelocities:c[2],lastIdealStyles:c[3],lastIdealVelocities:c[4],mergedPropsStyles:p}},p.prototype.componentDidMount=function(){this.prevTime=P.default(),this.startAnimationIfNecessary()},p.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(D(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=P.default(),this.startAnimationIfNecessary())},p.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(i.default.cancel(this.animationID),this.animationID=null)},p.prototype.render=function(){var e=D(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&l.default.Children.only(t)},p);function p(e){var T=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),u.call(this,e),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=A(T.props.willEnter,T.props.willLeave,T.props.didLeave,T.state.mergedPropsStyles,e,T.state.currentStyles,T.state.currentVelocities,T.state.lastIdealStyles,T.state.lastIdealVelocities),n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],l=0;l<e.length;l++){var s=e[l].style,u=!1;for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var p=s[c];"number"==typeof p&&(u||(u=!0,r[l]=f({},r[l]),a[l]=f({},a[l]),o[l]=f({},o[l]),i[l]=f({},i[l]),n[l]={key:n[l].key,data:n[l].data,style:f({},n[l].style)}),r[l][c]=p,a[l][c]=0,o[l][c]=p,i[l][c]=0,n[l].style[c]=p)}}T.setState({currentStyles:r,currentVelocities:a,mergedPropsStyles:n,lastIdealStyles:o,lastIdealVelocities:i})},this.startAnimationIfNecessary=function(){T.unmounting||(T.animationID=i.default(function(e){if(!T.unmounting){var t=T.props.styles,n="function"==typeof t?t(D(T.state.mergedPropsStyles,T.unreadPropStyles,T.state.lastIdealStyles)):t;if(function(e,t,n,r){if(r.length!==t.length)return!1;for(var a=0;a<r.length;a++)if(r[a].key!==t[a].key)return!1;for(a=0;a<r.length;a++)if(!j.default(e[a],t[a].style,n[a]))return!1;return!0}(T.state.currentStyles,n,T.state.currentVelocities,T.state.mergedPropsStyles))return T.animationID=null,void(T.accumulatedTime=0);var r=e||P.default(),a=r-T.prevTime;if(T.prevTime=r,T.accumulatedTime=T.accumulatedTime+a,T.accumulatedTime>10*M&&(T.accumulatedTime=0),0===T.accumulatedTime)return T.animationID=null,void T.startAnimationIfNecessary();for(var o=(T.accumulatedTime-Math.floor(T.accumulatedTime/M)*M)/M,i=Math.floor(T.accumulatedTime/M),l=A(T.props.willEnter,T.props.willLeave,T.props.didLeave,T.state.mergedPropsStyles,n,T.state.currentStyles,T.state.currentVelocities,T.state.lastIdealStyles,T.state.lastIdealVelocities),s=l[0],u=l[1],c=l[2],p=l[3],f=l[4],d=0;d<s.length;d++){var y=s[d].style,h={},m={},v={},b={};for(var g in y)if(Object.prototype.hasOwnProperty.call(y,g)){var _=y[g];if("number"==typeof _)h[g]=_,m[g]=0,v[g]=_,b[g]=0;else{for(var S=p[d][g],w=f[d][g],x=0;x<i;x++){var O=E.default(M/1e3,S,w,_.val,_.stiffness,_.damping,_.precision);S=O[0],w=O[1]}var I=E.default(M/1e3,S,w,_.val,_.stiffness,_.damping,_.precision),k=I[0],C=I[1];h[g]=S+(k-S)*o,m[g]=w+(C-w)*o,v[g]=S,b[g]=w}}p[d]=v,f[d]=b,u[d]=h,c[d]=m}T.animationID=null,T.accumulatedTime-=i*M,T.setState({currentStyles:u,currentVelocities:c,lastIdealStyles:p,lastIdealVelocities:f,mergedPropsStyles:s}),T.unreadPropStyles=null,T.startAnimationIfNecessary()}}))},this.state=this.defaultState()}t.default=c,e.exports=t.default},1341:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,s,t){for(var u={},n=0;n<e.length;n++)u[e[n].key]=n;var c={};for(n=0;n<s.length;n++)c[s[n].key]=n;var r=[];for(n=0;n<s.length;n++)r[n]=s[n];for(n=0;n<e.length;n++)if(!Object.prototype.hasOwnProperty.call(c,e[n].key)){var a=t(n,e[n]);null!=a&&r.push(a)}return r.sort(function(e,t){var n=c[e.key],r=c[t.key],a=u[e.key],o=u[t.key];if(null!=n&&null!=r)return c[e.key]-c[t.key];if(null!=a&&null!=o)return u[e.key]-u[t.key];if(null!=n){for(var i=0;i<s.length;i++){var l=s[i].key;if(Object.prototype.hasOwnProperty.call(u,l)){if(n<c[l]&&o>u[l])return-1;if(n>c[l]&&o<u[l])return 1}}return 1}for(i=0;i<s.length;i++){l=s[i].key;if(Object.prototype.hasOwnProperty.call(u,l)){if(r<c[l]&&a>u[l])return 1;if(r>c[l]&&a<u[l])return-1}}return-1})},e.exports=t.default},1342:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return r({},l,t,{val:e})};var a,o=n(1304),i=(a=o)&&a.__esModule?a:{default:a},l=r({},i.default.noWobble,{precision:.01});e.exports=t.default},1343:function(e,t,n){"use strict";t.__esModule=!0;t.default=function(){0};e.exports=t.default},1590:function(e,t,n){"use strict";n.r(t);var r,a=n(1),o=n(2),l=n.n(o),i=n(166),s=n(42),u=n(1335),c=n.n(u),p=n(0),f=n(21),d=n(140),y=n(1337),h=n(5),m=n.n(h),v=n(16),b=n(380),g=n(25),_=n.n(g),S=(r=p.Component,a.__extends(w,r),w.prototype.componentDidMount=function(){var e=this.props.editor,t=_()(window,"shimo.socket",null);t&&e&&this.initCollab(e,t)},w.prototype.componentWillReceiveProps=function(e){var t=_()(window,"shimo.socket",null),n=e.editor,r=this.props.editor;n!==r&&!r&&t&&this.initCollab(n,t)},w.prototype.componentWillUnmount=function(){this.props.editor&&this.props.editor.collaboratorsClient&&this.props.editor.collaboratorsClient.quit()},w.prototype.onClickAvatar=function(t,n){if(n&&this.canBeMentioned(t)){var e=this.props,r=e.file,a=e.editor,o=e.showSidebarTab;if(!a)return;var i=a.discord,l=a.sideBarManager;l&&l.show("discordpanel","discord"),Object(v.p)(r)&&a.historySidebar.showSidebar("discord"),Object(b.a)(i,function(e){e.emit(e.constructor.events.MENTION,{type:"user",data:{name:n,id:t}})},this),Object(v.l)(r)&&o&&o({visible:!0,type:"discordVisible"})}},w.prototype.canBeMentioned=function(e){return!!this.isDiscordAvailable()&&(e=Number(e))!==Number(this.props.me.user_id)&&0<e},w.prototype.isDiscordAvailable=function(){var e=this.props.file,t=void 0===e?{}:e;return Object(v.t)(t.type)!==l()("\u65e7\u6587\u6863")},w.prototype.getDropdownTrigger=function(){var e=this.state.cooperators.slice(7).length;return p.createElement(q,null,p.createElement("span",null,"+",e))},w.prototype.renderMoreAvatars=function(){var e=this.state.cooperators.slice(7);if(0===e.length)return null;var t=this.getMenu(e);return p.createElement(F,null,p.createElement(i.a,{overlay:t,overlayStyle:{boxShadow:"0 0 6px 0 rgba(0,0,0,0.15)"},trigger:["hover"],placement:"bottomCenter",showTip:!0},this.getDropdownTrigger()))},w.prototype.renderAvatars=function(){var n=this,e=this.state.cooperators;7<this.state.cooperators.length&&(e=this.state.cooperators.slice(0,7).concat(this.state.cooperators.slice(-1)));var t=e.map(function(e,t){return{key:String(t),data:e,style:{right:Object(y.spring)(28*t,{stiffness:300,damping:40})}}});return p.createElement(y.TransitionMotion,{styles:t,willEnter:this.willEnter},function(e){return p.createElement("div",null,e.map(function(e,t){return t<7?p.createElement(R,{key:e.key,style:e.style,onClick:n.onClickAvatar.bind(n,e.data.id,e.data.name)},p.createElement(s.a,{trigger:"hover",title:(n.canBeMentioned(e.data.id)?"@ ":"")+e.data.name,placement:"bottom"},p.createElement(U,{src:e.data.avatar,alt:e.data.name}),p.createElement(V,{color:e.data.color}))):p.createElement(N,{key:e.data.id},p.createElement(U,{src:e.data.avatar,alt:e.data.name}),p.createElement(V,{color:e.data.color}))}))})},w.prototype.render=function(){return p.createElement(B,null,this.renderAvatars(),this.renderMoreAvatars())},w);function w(e){var i=r.call(this,e)||this;return i.bindingCollabEvents=!1,i.initCollab=function(e,t){var n=i.props,r=n.file,a=n.me;if(r.guid&&a.id){var o=e&&e.collaboratorsClient?e.collaboratorsClient:new c.a({ws:t,fileGuid:r.guid,currentUserId:a.id});o.on("UserEnter",function(e){var t=e.collaborators;i.setState({cooperators:t})}),o.on("UserLeave",function(e){var t=e.collaborators;i.setState({cooperators:t})}),i.setState({cooperators:o.getCollaborators()}),o.start()}},i._makeCooperatorsList=function(e){for(var t=[],n={avatar:"https://dn-shimo-image-dev.qbox.me/srqpcLooEG48iwf1/IMG_20180102_180549.jpg",color:"#EC6E79",count:1,id:6839840,ip:"unknown",name:l()("\u67d0\u4e2a\u4eba"),userAgent:"Anonymous"},r=0;r<e;r++)t.push(Object.assign({},n,{id:n.id+r}));return t},i.getMenu=function(e){return p.createElement(D,null,e.map(function(e,t){return p.createElement(A,{key:t},p.createElement(s.a,{trigger:"hover",title:(i.canBeMentioned(e.id)?"@ ":"")+e.name,placement:"bottom"},p.createElement(U,{src:e.avatar,alt:e.name}),p.createElement(V,{color:e.color})))}))},i.willLeave=function(){return{zIndex:0,right:Object(y.spring)(2)}},i.willEnter=function(){return{zIndex:0,right:2}},i.state={cooperators:[]},i}var x,O,I,k,C,T,E,P,j,M,D=m.a.div(x=x||a.__makeTemplateObject(["\n  max-width: 140px;\n  padding: 8px 11px;\n  background-color: #fff;\n"],["\n  max-width: 140px;\n  padding: 8px 11px;\n  background-color: #fff;\n"])),A=m.a.div(O=O||a.__makeTemplateObject(["\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  padding: 0;\n  margin: 4px;\n  position: relative;\n"],["\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  padding: 0;\n  margin: 4px;\n  position: relative;\n"])),U=m.a.img(I=I||a.__makeTemplateObject(["\n  overflow: hidden;\n  border-radius: 10px;\n  background-color: #fff;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  font-size: 0;\n"],["\n  overflow: hidden;\n  border-radius: 10px;\n  background-color: #fff;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  font-size: 0;\n"])),V=m.a.span(k=k||a.__makeTemplateObject(["\n  display: inline-block;\n  height: 4px;\n  width: 4px;\n  background-color: ",";\n  border-radius: 4px;\n  border: 2px solid #fff;\n  position: absolute;\n  bottom: 0px;\n  right: -3px;\n"],["\n  display: inline-block;\n  height: 4px;\n  width: 4px;\n  background-color: ",";\n  border-radius: 4px;\n  border: 2px solid #fff;\n  position: absolute;\n  bottom: 0px;\n  right: -3px;\n"]),function(e){return e.color}),R=m.a.div(C=C||a.__makeTemplateObject(["\n  position: absolute;\n  right: 0;\n  height: 20px;\n  width: 20px;\n  line-height: 20px;\n  border-radius: 20px;\n  display: inline-block;\n  padding: 0;\n  overflow: visible;\n  z-index: 101;\n"],["\n  position: absolute;\n  right: 0;\n  height: 20px;\n  width: 20px;\n  line-height: 20px;\n  border-radius: 20px;\n  display: inline-block;\n  padding: 0;\n  overflow: visible;\n  z-index: 101;\n"])),L=Object(h.keyframes)(T=T||a.__makeTemplateObject(["\n  0% {\n    opacity: 1;\n    right: 0;\n  }\n\n  40% {\n    opacity: 0.6;\n    right: 56px;\n  }\n\n  60% {\n    opacity: 0.8;\n    right: 112px;\n  }\n\n  80% {\n    opacity: 0.4;\n    right: 196px;\n  }\n\n  100% {\n    opacity: 0;\n    right: 224px;\n  }\n"],["\n  0% {\n    opacity: 1;\n    right: 0;\n  }\n\n  40% {\n    opacity: 0.6;\n    right: 56px;\n  }\n\n  60% {\n    opacity: 0.8;\n    right: 112px;\n  }\n\n  80% {\n    opacity: 0.4;\n    right: 196px;\n  }\n\n  100% {\n    opacity: 0;\n    right: 224px;\n  }\n"])),N=R.extend(E=E||a.__makeTemplateObject(["\n  z-index: 102;\n  opacity: 0;\n  right: 224px;\n  cursor: auto;\n  animation: "," 0.5s ease-in;\n"],["\n  z-index: 102;\n  opacity: 0;\n  right: 224px;\n  cursor: auto;\n  animation: "," 0.5s ease-in;\n"]),L),B=m.a.div(P=P||a.__makeTemplateObject(["\n  width: 224px;\n  height: 20px;\n  margin: 15px 8px 15px 0;\n  position: relative;\n"],["\n  width: 224px;\n  height: 20px;\n  margin: 15px 8px 15px 0;\n  position: relative;\n"])),F=m.a.div(j=j||a.__makeTemplateObject(["\n  position: absolute;\n  height: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 104;\n  cursor: pointer;\n"],["\n  position: absolute;\n  height: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 104;\n  cursor: pointer;\n"])),q=m.a.div(M=M||a.__makeTemplateObject(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 10px;\n  min-width: 28px;\n  height: 20px;\n  line-height: 10px;\n  border-radius: 10px;\n  background: linear-gradient(45deg, #666, #41464b);\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 10px;\n  min-width: 28px;\n  height: 20px;\n  line-height: 10px;\n  border-radius: 10px;\n  background: linear-gradient(45deg, #666, #41464b);\n"]));t.default=Object(f.connect)(function(e){return{currentUser:Object(d.a)(e)}})(S)}}]);
//# sourceMappingURL=collaborators_bar.31157436.js.map